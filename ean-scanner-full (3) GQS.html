<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EAN Scanner - Shoe Square Lookup</title>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: #2196F3;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .content {
            padding: 20px;
        }
        
        #reader {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .result-box {
            background: #e8f5e9;
            border: 2px solid #4CAF50;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .result-box.show {
            display: block;
        }
        
        .result-box.error {
            background: #ffebee;
            border-color: #f44336;
        }
        
        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: bold;
            color: #2196F3;
        }
        
        .result-box.error .result-value {
            color: #f44336;
            font-size: 18px;
        }
        
        .ean-display {
            margin-top: 10px;
            font-size: 16px;
            color: #666;
        }
        
        .manual-input {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }
        
        .manual-input h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .input-group {
            display: flex;
            gap: 10px;
        }
        
        .input-group input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .input-group button {
            padding: 12px 24px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .input-group button:hover {
            background: #1976D2;
        }
        
        .toggle-camera {
            width: 100%;
            padding: 12px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .toggle-camera:hover {
            background: #45a049;
        }
        
        .toggle-camera.stop {
            background: #f44336;
        }
        
        .toggle-camera.stop:hover {
            background: #d32f2f;
        }

        .stats {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #856404;
        }

        .warning strong {
            display: block;
            margin-bottom: 5px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì¶ EAN Scanner</h1>
            <p>Scan barcode to find Shoe Square Number</p>
        </div>
        
        <div class="content">
            <div id="httpsWarning" class="warning hidden">
                <strong>‚ö†Ô∏è Camera may not work</strong>
                For iPhone/iOS: This page must be accessed via HTTPS (secure connection) or localhost for camera to work. Please host this file on a web server with HTTPS, or use manual entry below.
            </div>

            <button id="toggleCamera" class="toggle-camera">Start Camera</button>
            
            <div id="reader"></div>
            
            <div id="result" class="result-box">
                <div class="result-label">Shoe Square Number:</div>
                <div class="result-value" id="resultValue"></div>
                <div class="ean-display" id="eanDisplay"></div>
            </div>
            
            <div class="manual-input">
                <h3>Or enter manually:</h3>
                <div class="input-group">
                    <input type="text" id="manualEan" placeholder="Enter EAN code" />
                    <button onclick="lookupManual()">Lookup</button>
                </div>
            </div>

            <div class="stats">
                Database: <span id="dbCount">0</span> EAN codes loaded
            </div>
        </div>
    </div>

    <script>
const eanDatabase = {
            "7630419159490": "1.1",
            "7630419159520": "1.2",
            "7630419159537": "1.3",
            "7630419159544": "1.4",
            "7630419159360": "2.1",
            "7630419159391": "2.2",
            "7630419159407": "2.3",
            "7630419159421": "2.4",
            "7630419159438": "2.5",
            "7630867827293": "3.1",
            "7630867827309": "3.2",
            "7630867827316": "3.3",
            "7630867827385": "3.4",
            "7630867827392": "3.5",
            "7630867827149": "4.1",
            "7630867827163": "4.2",
            "7630867827217": "4.3",
            "7630867827224": "4.4",
            "7630867827248": "4.5",
            "7630867827255": "4.6",
            "7630867827279": "4.7",
            "7615537035642": "5.1",
            "7615537035666": "5.2",
            "7630867815344": "6.1",
            "7630867815351": "6.2",
            "7630867815368": "6.3",
            "7630867815375": "6.4",
            "7630867815382": "6.5",
            "7630867815399": "6.6",
            "7630867815405": "6.7",
            "7630867815412": "6.8",
            "7630867815429": "6.9",
            "7630867815436": "6.1",
            "7630040591027": "7.1",
            "7630040591041": "7.2",
            "7630040591058": "7.3",
            "7630040591089": "7.4",
            "7630040591096": "7.5",
            "7630040591102": "7.6",
            "7630040591119": "7.7",
            "7630040591157": "7.8",
            "7630040567633": "8.1",
            "7630040567640": "8.2",
            "7630040567695": "8.3",
            "7630040567701": "8.4",
            "7630040567572": "9.1",
            "7630040567602": "9.2",
            "7630040567367": "10.1",
            "7630040567398": "10.2",
            "7630040567435": "10.3",
            "7630040567442": "10.4",
            "7630040567459": "10.5",
            "7630040567206": "11.1",
            "7630040567213": "11.2",
            "7630040567220": "11.3",
            "7630040567244": "11.4",
            "7630040567251": "11.5",
            "7630040567299": "11.6",
            "7630040567329": "11.7",
            "7630040567084": "12.1",
            "7630040567091": "12.2",
            "7630040567107": "12.3",
            "7630040567114": "12.4",
            "7630040567121": "12.5",
            "7630040567138": "12.6",
            "7630040567145": "12.7",
            "7630040567169": "12.8",
            "7630040567190": "12.9",
            "7630867817515": "13.1",
            "7630867817577": "14.1",
            "7630867817584": "14.2",
            "7630867817591": "14.3",
            "7630867817607": "14.4",
            "7630440666288": "15.1",
            "7630440666318": "15.2",
            "7630440666219": "16.1",
            "7630440666059": "17.1",
            "7630440626916": "18.1",
            "7630440627203": "19.1",
            "7630440627227": "19.2",
            "7630440627234": "19.3",
            "7630440627241": "19.4",
            "7630867815627": "20.1",
            "7630867815634": "20.2",
            "7630867815658": "20.3",
            "7630040590785": "21.1",
            "7630040590792": "21.2",
            "7630040590808": "21.3",
            "7630040590822": "21.4",
            "7630040590839": "21.5",
            "7630040590846": "21.6",
            "7630040590853": "21.7",
            "7630040573016": "22.1",
            "7630040573030": "22.2",
            "7630040573047": "22.3",
            "7630040573054": "22.4",
            "7630040573061": "22.5",
            "7630040573078": "22.6",
            "7630040573092": "22.7",
            "7630040573115": "22.8",
            "7630419169208": "23.1",
            "7630419104162": "24.1",
            "7630419104193": "24.2",
            "7630040572729": "25.1",
            "7630040572736": "25.2",
            "7630040572750": "25.3",
            "7630040572767": "25.4",
            "7630040572774": "25.5",
            "7630040572781": "25.6",
            "7630040572798": "25.7",
            "7630040572828": "25.8",
            "7630419168935": "26.1",
            "7630419168942": "26.2",
            "7630440629825": "27.1",
            "7630440629832": "27.2",
            "7630440629849": "27.3",
            "7630440629863": "27.4",
            "7630440629870": "27.5",
            "7630440629924": "27.6",
            "7630440629955": "28.1",
            "7630440629993": "28.2",
            "7630440630029": "28.3",
            "7630440630036": "28.4",
            "7630440630074": "29.1",
            "7630440630081": "29.2",
            "7630440630111": "29.3",
            "7630440630135": "29.4",
            "7630440630159": "29.5",
            "7630440630166": "29.6",
            "7630440630173": "29.7",
            "7630440630234": "30.1",
            "7630440630241": "30.2",
            "7630440630258": "30.3",
            "7630440630265": "30.4",
            "7630440630272": "30.5",
            "7630440630289": "30.6",
            "7630440630296": "30.7",
            "7630440630302": "30.8",
            "7630440630319": "30.9",
            "7630440630326": "30.1",
            "7630867865998": "31.1",
            "7630867831368": "32.1",
            "7630867831399": "32.2",
            "7630867831405": "32.3",
            "7630867831412": "32.4",
            "7630867831429": "32.5",
            "7630419164562": "33.1",
            "7630419164579": "33.2",
            "7630419164586": "33.3",
            "7630419164616": "33.4",
            "7630419164623": "33.5",
            "7630419164630": "33.6",
            "7630419164647": "33.7",
            "7630419164654": "33.8",
            "7630419164661": "33.9",
            "7630419164678": "33.1",
            "7630867824353": "34.1",
            "7630867824384": "34.2",
            "7630867824414": "34.3",
            "7630867824421": "34.4",
            "7630867824438": "34.5",
            "7630867815078": "35.1",
            "7630867815092": "35.2",
            "7615537039725": "36.1",
            "7630419168638": "37.1",
            "7630419168652": "37.2",
            "7630419168669": "37.3",
            "7630419163480": "38.1",
            "7630419163541": "38.2",
            "7630419163671": "39.1",
            "7630419163688": "39.2",
            "7630419163725": "39.3",
            "7630419163756": "39.4",
            "7630867817010": "40.1",
            "7630867817041": "40.2",
            "7630867817065": "40.3",
            "7630867817119": "40.4",
            "7630867841046": "41.1",
            "7630867841053": "41.2",
            "7630867841077": "41.3",
            "7630867841145": "41.4",
            "7630040596114": "42.1",
            "7630419112594": "43.1",
            "7630419112600": "43.2",
            "7630419112617": "43.3",
            "7630419112624": "43.4",
            "7630419112631": "43.5",
            "7630419112648": "43.6",
            "7630419112662": "43.7",
            "7630419112679": "43.8",
            "7630419112686": "43.9",
            "7630440659563": "44.1",
            "7630440659570": "44.2",
            "7630440659587": "44.3",
            "7630440659594": "44.4",
            "7630440659600": "44.5",
            "7630440659617": "44.6",
            "7630440659624": "44.7",
            "7630440659631": "44.8",
            "7630419172710": "45.1",
            "7630419172734": "45.2",
            "7630419172741": "45.3",
            "7630419172765": "45.4",
            "7630419172796": "45.5",
            "7630419113546": "46.1",
            "7630419113577": "46.2",
            "7630419113584": "46.3",
            "7630419113591": "46.4",
            "7630419113607": "46.5",
            "7630440658474": "47.1",
            "7630440658504": "47.2",
            "7630440630432": "48.1",
            "7630440630517": "49.1",
            "7630440630524": "49.2",
            "7630440630609": "49.3",
            "7630440630654": "50.1",
            "7630440630685": "50.2",
            "7630440630708": "50.3",
            "7630440630760": "50.4",
            "7630419175285": "51.1",
            "7630419175308": "51.2",
            "7630419175315": "51.3",
            "7630419175322": "51.4",
            "7630419175346": "51.5",
            "7630419114758": "52.1",
            "7630419114789": "52.2",
            "7630419114796": "52.3",
            "7630419114802": "52.4",
            "7630419114321": "53.1",
            "7630419114338": "53.2",
            "7630419114352": "53.3",
            "7630419114369": "53.4",
            "7630419114383": "53.5",
            "7630419114208": "54.1",
            "7630419114215": "54.2",
            "7630419114222": "54.3",
            "7630419114239": "54.4",
            "7630419114246": "54.5",
            "7630419114260": "54.6",
            "7630419114284": "54.7",
            "7630440668459": "55.1",
            "7630440668312": "56.1",
            "7630440668329": "56.2",
            "7630440668336": "56.3",
            "7630440668374": "56.4",
            "7630440668206": "57.1",
            "7630440668220": "57.2",
            "7630440668244": "57.3",
            "7630440668251": "57.4",
            "7630440657392": "58.1",
            "7630440657415": "58.2",
            "7630440657439": "58.3",
            "7630440657453": "58.4",
            "7630440631071": "59.1",
            "7630440631101": "59.2",
            "7630040592116": "60.1",
            "7630040592192": "60.2",
            "7630040592208": "60.3",
            "7630040592215": "60.4",
            "7630040591997": "61.1",
            "7630040592000": "61.2",
            "7630040592017": "61.3",
            "7630040592024": "61.4",
            "7630040592031": "61.5",
            "7630040591850": "62.1",
            "7630040591874": "62.2",
            "7630040591881": "62.3",
            "7630040591898": "62.4",
            "7630040591904": "62.5",
            "7630040591959": "62.6",
            "7630040591706": "63.1",
            "7630040591744": "63.2",
            "7630040591751": "63.3",
            "7630040591775": "63.4",
            "7630040591829": "63.5",
            "7630419171478": "64.1",
            "7630419171522": "64.2",
            "7630419171539": "64.3",
            "7630867823929": "65.1",
            "7630867823936": "65.2",
            "7630867823943": "65.3",
            "7630867823950": "65.4",
            "7630867823967": "65.5",
            "7630867823974": "65.6",
            "7630867823981": "65.7",
            "7630867823998": "65.8",
            "7630867824001": "65.9",
            "7630867824018": "65.1",
            "7630867824025": "65.11",
            "7630867824049": "65.12",
            "7630419166863": "66.1",
            "7630419166887": "66.2",
            "7630419166894": "66.3",
            "7630419166900": "66.4",
            "7630419166917": "66.5",
            "7630419166955": "66.6",
            "7630419166962": "66.7",
            "7630867824063": "67.1",
            "7630867824087": "67.2",
            "7630867824094": "67.3",
            "7630867824100": "67.4",
            "7630867824117": "67.5",
            "7630867824124": "67.6",
            "7630867824131": "67.7",
            "7630867824155": "67.8",
            "7630867824162": "67.9",
            "7630867824186": "67.1",
            "7630867824193": "67.11",
            "7630867831221": "68.1",
            "7630867831238": "68.2",
            "7630867831252": "68.3",
            "7630867831269": "68.4",
            "7630867831276": "68.5",
            "7630419168126": "69.1",
            "7630419168171": "69.2",
            "7630419178330": "70.1",
            "7630419178347": "70.2",
            "7630419178354": "70.3",
            "7630419178361": "70.4",
            "7630419178378": "70.5",
            "7630419178385": "70.6",
            "7630419178392": "70.7",
            "7630419178408": "70.8",
            "7630419178415": "70.9",
            "7630419178422": "70.1",
            "7630419178439": "70.11",
            "7630419178446": "70.12",
            "7630419178453": "70.13",
            "7630419178507": "71.1",
            "7630419178545": "71.2",
            "7630419178569": "71.3",
            "7630419178606": "71.4",
            "7630419162162": "72.1",
            "7630419162186": "72.2",
            "7630419162193": "72.3",
            "7630419116073": "73.1",
            "7630419116158": "73.2",
            "7630419116172": "73.3",
            "7630419116349": "74.1",
            "7630419116400": "74.2",
            "7630440656296": "75.1",
            "7630440656319": "75.2",
            "7630440656333": "75.3",
            "7630440656340": "75.4",
            "7630440656364": "75.5",
            "7630440656371": "75.6",
            "7630440656388": "75.7",
            "7630440656401": "75.8",
            "7630440627319": "76.1",
            "7630440627333": "76.2",
            "7630440627340": "76.3",
            "7630440627357": "76.4",
            "7630440627395": "76.5",
            "7630040595612": "77.1",
            "7630040595650": "77.2",
            "7630040595667": "77.3",
            "7630040595704": "77.4",
            "7630040595476": "78.1",
            "7630040595490": "78.2",
            "7630040595513": "78.3",
            "7630040595520": "78.4",
            "7630040595544": "78.5",
            "7630040595551": "78.6",
            "7630040595568": "78.7",
            "7630040595575": "78.8",
            "7630040595582": "78.9",
            "7630040595599": "78.1",
            "7630040595605": "78.11",
            "7630867816723": "79.1",
            "7630867816754": "79.2",
            "7630867816761": "79.3",
            "7630867816785": "79.4",
            "7630867816792": "79.5",
            "7630867816808": "79.6",
            "7630867816815": "79.7",
            "7630867816839": "79.8",
            "7630440642879": "80.1",
            "7630440642886": "80.2",
            "7630440642909": "80.3",
            "7630867827996": "81.1",
            "7630867828009": "81.2",
            "7630867828016": "81.3",
            "7630867828023": "81.4",
            "7630867828047": "81.5",
            "7630867828061": "81.6",
            "7630867828078": "81.7",
            "7630867828085": "81.8",
            "7630867828108": "81.9",
            "7630867828115": "81.1",
            "7630419188810": "82.1",
            "7630419188841": "82.2",
            "7630419188865": "82.3",
            "7630419188872": "82.4",
            "7630419188896": "82.5",
            "7630419188926": "82.6",
            "7630419160052": "83.1",
            "7630419160069": "83.2",
            "7630419119050": "84.1",
            "7630419119067": "84.2",
            "7630419119081": "84.3",
            "7630419119159": "84.4",
            "7630419119036": "85.1",
            "7630419118817": "86.1",
            "7630419118824": "86.2",
            "7630419118831": "86.3",
            "7630419118855": "86.4",
            "7630419118909": "86.5",
            "7630440663898": "87.1",
            "7630440663904": "87.2",
            "7630440663911": "87.3",
            "7630440663966": "87.4",
            "7630440663454": "88.1",
            "7630440663478": "88.2",
            "7630440663485": "88.3",
            "7630440628279": "89.1",
            "7630440628286": "89.2",
            "7630440628293": "89.3",
            "7630440628309": "89.4",
            "7630440628323": "89.5",
            "7630440628330": "89.6",
            "7630440628415": "90.1",
            "7630440628439": "90.2",
            "7630440628446": "90.3",
            "7630440628453": "90.4",
            "7630440628460": "90.5",
            "7630440628477": "90.6",
            "7630440628484": "90.7",
            "7630440628576": "91.1",
            "7630440628583": "91.2",
            "7630440628590": "91.3",
            "7630440628606": "91.4",
            "7630440628620": "91.5",
            "7630867815467": "92.1",
            "7630867815481": "92.2",
            "7630867815504": "92.3",
            "7630867815528": "92.4",
            "7630419161356": "93.1",
            "7630419120063": "94.1",
            "7630419119609": "95.1",
            "7630419119715": "95.2",
            "7630440628712": "96.1",
            "7630440628743": "96.2",
            "7630440628798": "96.3",
            "7630440628835": "97.1",
            "7630440628903": "97.2",
            "7630440628910": "97.3",
            "7630440613183": "98.1",
            "7630440613190": "98.2",
            "7630440613206": "98.3",
            "7630440613213": "98.4",
            "7630440613220": "98.5",
            "7630440613237": "98.6",
            "7630440613244": "98.7",
            "7630440613251": "98.8",
            "7630440613053": "99.1",
            "7630440613077": "99.2",
            "7630440613091": "99.3",
            "7630440613138": "99.4",
            "7630440689942": "100.1",
            "7630867828429": "101.1",
            "7630867828450": "101.2",
            "7630867828467": "101.3",
            "7630419160687": "102.1",
            "7630419160694": "102.2",
            "7630419160519": "103.1",
            "7630419160533": "103.2",
            "7630419160564": "103.3",
            "7630419160571": "103.4",
            "7630419160588": "103.5",
            "7630419160601": "103.6",
            "7630419160618": "103.7",
            "7630419160632": "103.8",
            "7630419120728": "104.1",
            "7630419120735": "104.2",
            "7630419120742": "104.3",
            "7630419120407": "105.1",
            "7630419120421": "105.2",
            "7630419120438": "105.3",
            "7630419120469": "105.4",
            "7630419120476": "105.5",
            "7630440664437": "106.1",
            "7630440620662": "107.1",
            "7630040582988": "108.1",
            "7630040585712": "108.2",
            "7630040585736": "108.3",
            "7630440615071": "109.1",
            "7630440615088": "109.2",
            "7630440615101": "109.3",
            "7630440615118": "109.4",
            "7630440615125": "109.5",
            "7630440615149": "109.6",
            "7630440615187": "109.7",
            "7630440613749": "110.1",
            "7630440613756": "110.2",
            "7630440613763": "110.3",
            "7630440613770": "110.4",
            "7630440613794": "110.5",
            "7630440613572": "111.1",
            "7630440613589": "111.2",
            "7630440613596": "111.3",
            "7630440613619": "111.4",
            "7630440613626": "111.5",
            "7630440613633": "111.6",
            "7630440613640": "111.7",
            "7630419168362": "112.1",
            "7630419168393": "112.2",
            "7630419168447": "112.3",
            "7630867828825": "113.1",
            "7630867828832": "113.2",
            "7630867828849": "113.3",
            "7630867828856": "113.4",
            "7630867828863": "113.5",
            "7630867828870": "113.6",
            "7630867828887": "113.7",
            "7630867828894": "113.8",
            "7630867828900": "113.9",
            "7630867828917": "113.1",
            "7630867828924": "113.11",
            "7630867828931": "113.12",
            "7630867828955": "113.13",
            "7630867828979": "114.1",
            "7630867828986": "114.2",
            "7630867828993": "114.3",
            "7630867829037": "114.4",
            "7630419161813": "115.1",
            "7615537039299": "116.1",
            "7615537039305": "116.2",
            "7615537039336": "116.3",
            "7615537039343": "116.4",
            "7615537039367": "116.5",
            "7615537039374": "116.6",
            "7630867836295": "117.1",
            "7630867836301": "117.2",
            "7630867836318": "117.3",
            "7630867836325": "117.4",
            "7630867836356": "117.5",
            "7630867836363": "117.6",
            "7630867836417": "117.7",
            "7630867836561": "118.1",
            "7630867836578": "118.2",
            "7630867836585": "118.3",
            "7630419159766": "119.1",
            "7630419159803": "119.2",
            "7630419159810": "119.3",
            "7630419159582": "120.1",
            "7630419159629": "120.2",
            "7630419159636": "120.3",
            "7630419159650": "120.4",
            "7630419159674": "120.5",
            "7615537035680": "121.1",
            "7615537035710": "121.2",
            "7615537035727": "121.3",
            "7615537035734": "121.4",
            "7615537035741": "121.5",
            "7615537035758": "121.6",
            "7615537035765": "121.7",
            "7615537035772": "121.8",
            "7615537035796": "121.9",
            "7615537035802": "121.1",
            "7630867819748": "122.1",
            "7630867819755": "122.2",
            "7630440656845": "123.1",
            "7630440656869": "123.2",
            "7630440656906": "123.3",
            "7630440656951": "123.4",
            "7630440640233": "124.1",
            "7630440640240": "124.2",
            "7630440640264": "124.3",
            "7630440640271": "124.4",
            "7630440640295": "124.5",
            "7630440640301": "124.6",
            "7630040591201": "125.1",
            "7630040591218": "125.2",
            "7630040591225": "125.3",
            "7630040591232": "125.4",
            "7630040591256": "125.5",
            "7630040591270": "125.6",
            "7630040591287": "125.7",
            "7630040568258": "126.1",
            "7630040568272": "126.2",
            "7630040568029": "127.1",
            "7630040568043": "127.2",
            "7630040568074": "127.3",
            "7630040568081": "127.4",
            "7630040568098": "127.5",
            "7630040568111": "127.6",
            "7630040568128": "127.7",
            "7630040568135": "127.8",
            "7630040567916": "128.1",
            "7630040567923": "128.2",
            "7630040567947": "128.3",
            "7630040567954": "128.4",
            "7630040567978": "128.5",
            "7630040567985": "128.6",
            "7630040568005": "128.7",
            "7630040567770": "129.1",
            "7630040567787": "129.2",
            "7630040567794": "129.3",
            "7630040567800": "129.4",
            "7630040567817": "129.5",
            "7630040567824": "129.6",
            "7630040567831": "129.7",
            "7630040567848": "129.8",
            "7630040567855": "129.9",
            "7630040567862": "129.1",
            "7630867821628": "130.1",
            "7630867821642": "130.2",
            "7630867821680": "130.3",
            "7630867821826": "131.1",
            "7630867821857": "131.2",
            "7630440666615": "132.1",
            "7630440636762": "133.1",
            "7630440636984": "134.1",
            "7630440637011": "134.2",
            "7630440637028": "134.3",
            "7630440637042": "134.4",
            "7630440637059": "134.5",
            "7630440637066": "134.6",
            "7630867819946": "135.1",
            "7630867819960": "135.2",
            "7630867819977": "135.3",
            "7630867820010": "135.4",
            "7630040590945": "136.1",
            "7630040590952": "136.2",
            "7630040573160": "137.1",
            "7630040573191": "137.2",
            "7630040573214": "137.3",
            "7630040573238": "137.4",
            "7630419169321": "138.1",
            "7630419104247": "139.1",
            "7630419104278": "139.2",
            "7630040572866": "140.1",
            "7630040572880": "140.2",
            "7630040572897": "140.3",
            "7630040572903": "140.4",
            "7630040572910": "140.5",
            "7630040572927": "140.6",
            "7630040572934": "140.7",
            "7630040572941": "140.8",
            "7630040572958": "140.9",
            "7630040572965": "140.1",
            "7630040572989": "140.11",
            "7630419169079": "141.1",
            "7630867866124": "142.1",
            "7630440637240": "143.1",
            "7630440637295": "143.2",
            "7630867840100": "144.1",
            "7630867840117": "144.2",
            "7630867840124": "144.3",
            "7630867840131": "144.4",
            "7630867840155": "144.5",
            "7630419169659": "145.1",
            "7630419164852": "146.1",
            "7630419164869": "146.2",
            "7630419164876": "146.3",
            "7630419164890": "146.4",
            "7630419164920": "146.5",
            "7630419164937": "146.6",
            "7630867819458": "147.1",
            "7615537039763": "148.1",
            "7615537039770": "148.2",
            "7615537039824": "148.3",
            "7615537039879": "148.4",
            "7615537039886": "148.5",
            "7630419168799": "149.1",
            "7630419168812": "149.2",
            "7630419163800": "150.1",
            "7630867839470": "151.1",
            "7630867821284": "152.1",
            "7630867841329": "153.1",
            "7630867841336": "153.2",
            "7630867841343": "153.3",
            "7630867841350": "153.4",
            "7630867841404": "153.5",
            "7630040596206": "154.1",
            "7630040596213": "154.2",
            "7630040596220": "154.3",
            "7630040596244": "154.4",
            "7630040596251": "154.5",
            "7630040596268": "154.6",
            "7630040596275": "154.7",
            "7630419172864": "155.1",
            "7630419113829": "156.1",
            "7630419113836": "156.2",
            "7630419113676": "157.1",
            "7630419113690": "157.2",
            "7630419113706": "157.3",
            "7630419113713": "157.4",
            "7630419113720": "157.5",
            "7630419113737": "157.6",
            "7630419113744": "157.7",
            "7630419113751": "157.8",
            "7630440660545": "158.1",
            "7630440660576": "158.2",
            "7630440639855": "159.1",
            "7630440639879": "159.2",
            "7630440639992": "160.1",
            "7630440640110": "161.1",
            "7630440640127": "161.2",
            "7630440640134": "161.3",
            "7630440640141": "161.4",
            "7630440640165": "161.5",
            "7630419175650": "162.1",
            "7630419175667": "162.2",
            "7630419175681": "162.3",
            "7630419175711": "162.4",
            "7630419175728": "162.5",
            "7630419175896": "163.1",
            "7630419114598": "164.1",
            "7630419114635": "164.2",
            "7630419114673": "164.3",
            "7630419114697": "164.4",
            "7630419114710": "164.5",
            "7630419114505": "165.1",
            "7630419114529": "165.2",
            "7630419114567": "165.3",
            "7630419114574": "165.4",
            "7630419114895": "166.1",
            "7630419114918": "166.2",
            "7630419114963": "166.3",
            "7630419114987": "166.4",
            "7630440668787": "167.1",
            "7630440668589": "168.1",
            "7630440668596": "168.2",
            "7630440668602": "168.3",
            "7630440668619": "168.4",
            "7630440668626": "168.5",
            "7630440668633": "168.6",
            "7630440668640": "168.7",
            "7630440640400": "169.1",
            "7630440640417": "169.2",
            "7630440640448": "169.3",
            "7630040592680": "170.1",
            "7630040592703": "170.2",
            "7630040592727": "170.3",
            "7630040592598": "171.1",
            "7630040592390": "172.1",
            "7630040592406": "172.2",
            "7630040592420": "172.3",
            "7630040592444": "172.4",
            "7630040592451": "172.5",
            "7630040592468": "172.6",
            "7630040592482": "172.7",
            "7630040592253": "173.1",
            "7630040592307": "173.2",
            "7630040592345": "173.3",
            "7630040592352": "173.4",
            "7630419172352": "174.1",
            "7630419172376": "174.2",
            "7630419172185": "175.1",
            "7630419167136": "176.1",
            "7630419167174": "176.2",
            "7630867832280": "177.1",
            "7630867832327": "177.2",
            "7630867832334": "177.3",
            "7630867832396": "178.1",
            "7630867832464": "178.2",
            "7630867832518": "178.3",
            "7630867839968": "179.1",
            "7630867839975": "179.2",
            "7630867840032": "179.3",
            "7630419168249": "180.1",
            "7630419178637": "181.1",
            "7630419178644": "181.2",
            "7630419178651": "181.3",
            "7630419178668": "181.4",
            "7630419178675": "181.5",
            "7630419178682": "181.6",
            "7630419178705": "181.7",
            "7630419178712": "181.8",
            "7630419178729": "181.9",
            "7630419178736": "181.1",
            "7630419178781": "182.1",
            "7630419178798": "182.2",
            "7630419178828": "182.3",
            "7630419178835": "182.4",
            "7630419162292": "183.1",
            "7630419162308": "183.2",
            "7630419162315": "183.3",
            "7630419116301": "184.1",
            "7630419116486": "185.1",
            "7630419116493": "185.2",
            "7630419116509": "185.3",
            "7630419116516": "185.4",
            "7630419116523": "185.5",
            "7630419116530": "185.6",
            "7630419116547": "185.7",
            "7630419116554": "185.8",
            "7630419116561": "185.9",
            "7630419116585": "185.1",
            "7630440653356": "186.1",
            "7630440653370": "186.2",
            "7630440653387": "186.3",
            "7630440653394": "186.4",
            "7630440653400": "186.5",
            "7630440653424": "186.6",
            "7630440653431": "186.7",
            "7630440656579": "187.1",
            "7630440656609": "187.2",
            "7630440656623": "187.3",
            "7630440656630": "187.4",
            "7630440637165": "188.1",
            "7630040595896": "189.1",
            "7630040595902": "189.2",
            "7630040595919": "189.3",
            "7630040595926": "189.4",
            "7630040595933": "189.5",
            "7630040595940": "189.6",
            "7630040595964": "189.7",
            "7630040595988": "189.8",
            "7630040595995": "189.9",
            "7630040596008": "189.1",
            "7630040595780": "190.1",
            "7630040595797": "190.2",
            "7630040595803": "190.3",
            "7630040595810": "190.4",
            "7630040595827": "190.5",
            "7630040595834": "190.6",
            "7630040595865": "190.7",
            "7630867821123": "191.1",
            "7630867821130": "191.2",
            "7630867821147": "191.3",
            "7630867821154": "191.4",
            "7630867821178": "191.5",
            "7630867821208": "191.6",
            "7630867836998": "192.1",
            "7630867837018": "192.2",
            "7630867837025": "192.3",
            "7630867837032": "192.4",
            "7630419160434": "193.1",
            "7630419119470": "194.1",
            "7630419119487": "194.2",
            "7630419119524": "194.3",
            "7630419119531": "194.4",
            "7630419119395": "195.1",
            "7630419119210": "196.1",
            "7630419119265": "196.2",
            "7630440664307": "197.1",
            "7630440663362": "198.1",
            "7630440663379": "198.2",
            "7630440637998": "199.1",
            "7630440638018": "199.2",
            "7630440638025": "199.3",
            "7630440638032": "199.4",
            "7630440638049": "199.5",
            "7630440638056": "199.6",
            "7630440638063": "199.7",
            "7630440638070": "199.8",
            "7630440638087": "199.9",
            "7630440638100": "199.1",
            "7630440638148": "200.1",
            "7630440638162": "200.2",
            "7630440638179": "200.3",
            "7630440638186": "200.4",
            "7630440638216": "200.5",
            "7630440638292": "201.1",
            "7630440638308": "201.2",
            "7630440638315": "201.3",
            "7630440638322": "201.4",
            "7630440638339": "201.5",
            "7630440638346": "201.6",
            "7630867819854": "202.1",
            "7630867819908": "202.2",
            "7630419161493": "203.1",
            "7630419120292": "204.1",
            "7630419120308": "204.2",
            "7630419120377": "204.3",
            "7630440638384": "205.1",
            "7630440638407": "205.2",
            "7630440638421": "205.3",
            "7630440638438": "205.4",
            "7630440638483": "205.5",
            "7630440638490": "205.6",
            "7630440638520": "206.1",
            "7630440638575": "206.2",
            "7630440638599": "206.3",
            "7630440613466": "207.1",
            "7630440613428": "208.1",
            "7630419160960": "209.1",
            "7630419160977": "209.2",
            "7630419161028": "209.3",
            "7630419160847": "210.1",
            "7630419160892": "210.2",
            "7630419121121": "211.1",
            "7630419121183": "211.2",
            "7630419121022": "212.1",
            "7630440692799": "213.1",
            "7630440692805": "213.2",
            "7630440665113": "214.1",
            "7630440665151": "214.2",
            "7630440665045": "215.1",
            "7630440637608": "216.1",
            "7630440637622": "216.2",
            "7630440637639": "216.3",
            "7630440637646": "216.4",
            "7630440637653": "216.5",
            "7630440637660": "216.6",
            "7630440637677": "216.7",
            "7630440637707": "216.8",
            "7630440637714": "216.9",
            "7630440637721": "216.1",
            "7630440620846": "217.1",
            "7630440615200": "218.1",
            "7630440615231": "218.2",
            "7630440614029": "219.1",
            "7630440614036": "219.2",
            "7630440614043": "219.3",
            "7630440613862": "220.1",
            "7630440613886": "220.2",
            "7630440613893": "220.3",
            "7630440613909": "220.4",
            "7630440613916": "220.5",
            "7630440613930": "220.6",
            "7630440613954": "220.7",
            "7615537039145": "221.1",
            "7615537039206": "221.2",
            "7615537039237": "221.3",
            "7630867837735": "222.1",
            "7630867837742": "222.2",
            "7630867837766": "222.3",
            "7630867837773": "222.4",
            "7630867837780": "222.5",
            "7630867837797": "222.6",
            "7630867837803": "222.7",
            "7630867837810": "222.8",
            "7630867837872": "223.1",
            "7630867837889": "223.2",
            "7630867837902": "223.3",
            "7630867837919": "223.4",
            "7630867837926": "223.5",
            "7630867837933": "223.6",
            "7630867837940": "223.7",
            "7630867837957": "223.8",
            "7630867837964": "223.9",
            "7630419162001": "224.1",
            "7630419162018": "224.2",
            "7630419162025": "224.3",
            "7630419162032": "224.4",
            "7630419162049": "224.5",
            "7630419162056": "224.6",
            "7630419162063": "224.7",
            "7630419162070": "224.8",
            "7630419162087": "224.9",
            "7630419162094": "224.1",
            "7615537039442": "225.1",
            "7615537039473": "225.2",
            "7615537039480": "225.3",
            "7615537039510": "225.4",
            "7615537039527": "225.5",
            "7615537039534": "225.6",
            "7630867877038": "226.1",
            "7615537006758": "227.1",
            "7630867814002": "228.1"
        };
        // Display database count on load
        document.getElementById('dbCount').textContent = Object.keys(eanDatabase).length;

        // Check if HTTPS (required for camera on iOS)
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isHTTPS = window.location.protocol === 'https:';
        const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        
        if (isIOS && !isHTTPS && !isLocalhost) {
            document.getElementById('httpsWarning').classList.remove('hidden');
        }

        let html5QrCode;
        let isScanning = false;
        
        const resultBox = document.getElementById('result');
        const resultValue = document.getElementById('resultValue');
        const eanDisplay = document.getElementById('eanDisplay');
        const toggleButton = document.getElementById('toggleCamera');
        const readerDiv = document.getElementById('reader');

        function lookupEAN(eanCode) {
            // Remove any spaces or dashes
            eanCode = eanCode.replace(/[\s-]/g, '');
            
            if (eanDatabase[eanCode]) {
                resultBox.className = 'result-box show';
                resultValue.textContent = eanDatabase[eanCode];
                eanDisplay.textContent = `EAN: ${eanCode}`;
                
                // Play success sound
                playBeep();
            } else {
                resultBox.className = 'result-box show error';
                resultValue.textContent = 'EAN not found in database';
                eanDisplay.textContent = `Scanned: ${eanCode}`;
            }
        }

        function playBeep() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function onScanSuccess(decodedText, decodedResult) {
            lookupEAN(decodedText);
            
            // Auto-clear result after 2 seconds to prepare for next scan
            setTimeout(() => {
                if (isScanning) {
                    resultBox.className = 'result-box';
                }
            }, 2000);
        }

        function onScanError(errorMessage) {
            // Ignore scan errors (they happen frequently during scanning)
        }

        async function startScanning() {
            try {
                readerDiv.style.display = 'block';
                html5QrCode = new Html5Qrcode("reader");
                
                // Get available cameras first (important for iOS)
                const cameras = await Html5Qrcode.getCameras();
                
                if (cameras && cameras.length > 0) {
                    // Try to find back camera (usually the last one on mobile devices)
                    const backCamera = cameras.find(camera => 
                        camera.label.toLowerCase().includes('back') || 
                        camera.label.toLowerCase().includes('rear') ||
                        camera.label.toLowerCase().includes('environment')
                    ) || cameras[cameras.length - 1]; // Fallback to last camera
                    
                    // Start with specific camera ID (works better on iOS)
                    await html5QrCode.start(
                        backCamera.id,
                        {
                            fps: 10,
                            qrbox: { width: 250, height: 250 },
                            aspectRatio: 1.0
                        },
                        onScanSuccess,
                        onScanError
                    );
                } else {
                    throw new Error('No cameras found on this device');
                }
                
                isScanning = true;
                toggleButton.textContent = 'Stop Camera';
                toggleButton.className = 'toggle-camera stop';
            } catch (err) {
                console.error('Camera error:', err);
                readerDiv.style.display = 'none';
                
                let errorMsg = 'Unable to start camera. ';
                
                // iOS-specific error messages
                if (err.name === 'NotAllowedError' || err.message.includes('permission')) {
                    errorMsg += 'Please allow camera access in your browser settings:\n\n';
                    errorMsg += 'Safari: Settings > Safari > Camera > Allow\n';
                    errorMsg += 'Chrome: Settings > Site Settings > Camera > Allow';
                } else if (err.name === 'NotFoundError') {
                    errorMsg += 'No camera found on this device.';
                } else if (err.name === 'NotReadableError') {
                    errorMsg += 'Camera is already in use by another app.';
                } else if (window.location.protocol === 'file:') {
                    errorMsg += 'Camera requires HTTPS or localhost. Please host this file on a web server or use manual entry.';
                } else {
                    errorMsg += err.message || 'Unknown error';
                }
                
                alert(errorMsg);
            }
        }

        async function stopScanning() {
            if (html5QrCode) {
                await html5QrCode.stop();
                html5QrCode.clear();
                readerDiv.style.display = 'none';
                isScanning = false;
                toggleButton.textContent = 'Start Camera';
                toggleButton.className = 'toggle-camera';
            }
        }

        toggleButton.addEventListener('click', async () => {
            if (isScanning) {
                await stopScanning();
            } else {
                await startScanning();
            }
        });

        function lookupManual() {
            const ean = document.getElementById('manualEan').value.trim();
            if (ean) {
                lookupEAN(ean);
            }
        }

        // Allow Enter key in manual input
        document.getElementById('manualEan').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                lookupManual();
            }
        });
    </script>
</body>
</html>
